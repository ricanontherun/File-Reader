#define CATCH_CONFIG_MAIN

#include "test_header.h"
#include <string>
#include "../file.h"

TEST_CASE("Reader::Open") {
    using File::Reader;

    SECTION("It can open files using a const char * path") {
        const char *file_path = "../data/file";
        Reader f;
        Reader::STATUS status = f.Open(file_path);

        REQUIRE(status == Reader::STATUS::OK);
        REQUIRE(f.Ok());
    }

    SECTION("It can open files using a std::string path") {
        std::string file_path = "../data/file";
        Reader f;
        Reader::STATUS status = f.Open(file_path);

        REQUIRE(status == Reader::STATUS::OK);
        REQUIRE(f.Ok());
    }

    SECTION("It returns an appropriate status when given a non-existing file path.") {
        std::string file_path = "../data/i_dont_exist";
        Reader f;
        Reader::STATUS status = f.Open(file_path);

        REQUIRE(status == Reader::STATUS::NOT_FOUND);
        REQUIRE(!f.Ok());
    }
}
